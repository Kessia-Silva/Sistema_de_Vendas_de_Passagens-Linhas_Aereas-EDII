<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Editar Voo</title>
    <link rel="icon" href="static/img/IconAviao.ico" type="image/x-icon">
    <link rel="stylesheet" href="static/css/padrao.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  </head>

  <body class="bg-light">

    <!-- Navbar -->
      <header class="Navbar d-flex justify-content-between align-items-center p-3">
      <div class="logo-container d-flex align-items-center">
        <h1 class="logo-text me-2">Linhas Aéreas EDII</h1>
        <img src="static/img/bandeiraDoBrasil.png" alt="Mapa Brasil" height="40">
      </div>

    <div class="d-flex align-items-center">
     <a href="/InicialAdm" title="Sair">
        <i class="fas fa-right-from-bracket fa-lg" style="color: white;"></i>
    </a>
    </div>
    </header>

  <main class="container mt-5">
      <h2 class="mb-4 text-primary">Relatórios e Estatísticas</h2>

      <!-- Cards de estatísticas -->
      <div class="row g-4 mb-5">
        <div class="col-md-4">
          <div class="card card-stat p-4 text-center bg-info text-white">
            <i class="fas fa-plane-departure fa-2x mb-2"></i>
            <h4>Total de voos realizados</h4>
            <p class="fs-4">{{ voos_realizados }}</p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card card-stat p-4 text-center bg-success text-white">
            <i class="fas fa-ticket-alt fa-2x mb-2"></i>
            <h4>Total de reservas</h4>
            <p class="fs-4">{{ reservas_totais }}</p>
          </div>
        </div>
      </div>

      <!-- Tabela de destinos mais procurados -->
      <h3 class="text-primary mb-3">Destinos mais procurados</h3>
      <table class="table table-striped table-bordered shadow-sm">
        <thead class="table-dark">
          <tr>
            <th>Destino</th>
            <th>Número de reservas</th>
          </tr>
        </thead>
        <tbody>
          {% for destino, quantidade in destinos_ordenados %}
          <tr>
            <td>{{ destino }}</td>
            <td>{{ quantidade }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      <!-- Gráfico -->
      <div class="chart-container mt-5">
        <canvas id="destinosChart"></canvas>
      </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      const ctx = document.getElementById('destinosChart').getContext('2d');
      const destinos = destinos_ordenados|tojson;
      const labels = destinos.map(d => d[0]);
      const data = destinos.map(d => d[1]);

      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: labels,
          datasets: [{
            label: 'Número de reservas',
            data: data,
            backgroundColor: data.map((v,i) => `rgba(${50 + i*20}, 123, 255, 0.7)`),
            borderColor: 'rgba(0,0,0,0.1)',
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { display: false },
            tooltip: { enabled: true }
          },
          scales: {
            y: {
              beginAtZero: true,
              ticks: { stepSize: 1 }
            }
          }
        }
      });
    </script>


  </body>
</html>